version: '3.8'
services:
  coordinator-1:
    build: ..
    image: collective:latest
    container_name: scale-coordinator-1
    networks:
    - testnet
    command: coordinator --member-id member-1 --address :8001 --data-dir /data
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'
  coordinator-2:
    build: ..
    image: collective:latest
    container_name: scale-coordinator-2
    networks:
    - testnet
    command: coordinator --member-id member-2 --address :8001 --data-dir /data --bootstrap-peers
      member-1:coordinator-1:8001
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'
  coordinator-3:
    build: ..
    image: collective:latest
    container_name: scale-coordinator-3
    networks:
    - testnet
    command: coordinator --member-id member-3 --address :8001 --data-dir /data --bootstrap-peers
      member-1:coordinator-1:8001,member-2:coordinator-2:8001
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'
  coordinator-4:
    build: ..
    image: collective:latest
    container_name: scale-coordinator-4
    networks:
    - testnet
    command: coordinator --member-id member-4 --address :8001 --data-dir /data --bootstrap-peers
      member-1:coordinator-1:8001,member-2:coordinator-2:8001,member-3:coordinator-3:8001
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'
  coordinator-5:
    build: ..
    image: collective:latest
    container_name: scale-coordinator-5
    networks:
    - testnet
    command: coordinator --member-id member-5 --address :8001 --data-dir /data --bootstrap-peers
      member-2:coordinator-2:8001,member-3:coordinator-3:8001,member-4:coordinator-4:8001
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'
  node-1:
    build: ..
    image: collective:latest
    container_name: scale-node-1
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-1 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-2:
    build: ..
    image: collective:latest
    container_name: scale-node-2
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-2 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-3:
    build: ..
    image: collective:latest
    container_name: scale-node-3
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-3 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-4:
    build: ..
    image: collective:latest
    container_name: scale-node-4
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-4 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-5:
    build: ..
    image: collective:latest
    container_name: scale-node-5
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-5 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-6:
    build: ..
    image: collective:latest
    container_name: scale-node-6
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-6 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-7:
    build: ..
    image: collective:latest
    container_name: scale-node-7
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-7 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-8:
    build: ..
    image: collective:latest
    container_name: scale-node-8
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-8 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-9:
    build: ..
    image: collective:latest
    container_name: scale-node-9
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-9 --address :7001 --coordinator
      coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-10:
    build: ..
    image: collective:latest
    container_name: scale-node-10
    networks:
    - testnet
    command: node --member-id member-1 --node-id member-1-node-10 --address :7001
      --coordinator coordinator-1:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-1
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-11:
    build: ..
    image: collective:latest
    container_name: scale-node-11
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-1 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-12:
    build: ..
    image: collective:latest
    container_name: scale-node-12
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-2 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-13:
    build: ..
    image: collective:latest
    container_name: scale-node-13
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-3 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-14:
    build: ..
    image: collective:latest
    container_name: scale-node-14
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-4 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-15:
    build: ..
    image: collective:latest
    container_name: scale-node-15
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-5 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-16:
    build: ..
    image: collective:latest
    container_name: scale-node-16
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-6 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-17:
    build: ..
    image: collective:latest
    container_name: scale-node-17
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-7 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-18:
    build: ..
    image: collective:latest
    container_name: scale-node-18
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-8 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-19:
    build: ..
    image: collective:latest
    container_name: scale-node-19
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-9 --address :7001 --coordinator
      coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-20:
    build: ..
    image: collective:latest
    container_name: scale-node-20
    networks:
    - testnet
    command: node --member-id member-2 --node-id member-2-node-10 --address :7001
      --coordinator coordinator-2:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-2
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-21:
    build: ..
    image: collective:latest
    container_name: scale-node-21
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-1 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-22:
    build: ..
    image: collective:latest
    container_name: scale-node-22
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-2 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-23:
    build: ..
    image: collective:latest
    container_name: scale-node-23
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-3 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-24:
    build: ..
    image: collective:latest
    container_name: scale-node-24
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-4 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-25:
    build: ..
    image: collective:latest
    container_name: scale-node-25
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-5 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-26:
    build: ..
    image: collective:latest
    container_name: scale-node-26
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-6 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-27:
    build: ..
    image: collective:latest
    container_name: scale-node-27
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-7 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-28:
    build: ..
    image: collective:latest
    container_name: scale-node-28
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-8 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-29:
    build: ..
    image: collective:latest
    container_name: scale-node-29
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-9 --address :7001 --coordinator
      coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-30:
    build: ..
    image: collective:latest
    container_name: scale-node-30
    networks:
    - testnet
    command: node --member-id member-3 --node-id member-3-node-10 --address :7001
      --coordinator coordinator-3:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-3
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-31:
    build: ..
    image: collective:latest
    container_name: scale-node-31
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-1 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-32:
    build: ..
    image: collective:latest
    container_name: scale-node-32
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-2 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-33:
    build: ..
    image: collective:latest
    container_name: scale-node-33
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-3 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-34:
    build: ..
    image: collective:latest
    container_name: scale-node-34
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-4 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-35:
    build: ..
    image: collective:latest
    container_name: scale-node-35
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-5 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-36:
    build: ..
    image: collective:latest
    container_name: scale-node-36
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-6 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-37:
    build: ..
    image: collective:latest
    container_name: scale-node-37
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-7 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-38:
    build: ..
    image: collective:latest
    container_name: scale-node-38
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-8 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-39:
    build: ..
    image: collective:latest
    container_name: scale-node-39
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-9 --address :7001 --coordinator
      coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-40:
    build: ..
    image: collective:latest
    container_name: scale-node-40
    networks:
    - testnet
    command: node --member-id member-4 --node-id member-4-node-10 --address :7001
      --coordinator coordinator-4:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-4
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-41:
    build: ..
    image: collective:latest
    container_name: scale-node-41
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-1 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-42:
    build: ..
    image: collective:latest
    container_name: scale-node-42
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-2 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-43:
    build: ..
    image: collective:latest
    container_name: scale-node-43
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-3 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-44:
    build: ..
    image: collective:latest
    container_name: scale-node-44
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-4 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-45:
    build: ..
    image: collective:latest
    container_name: scale-node-45
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-5 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-46:
    build: ..
    image: collective:latest
    container_name: scale-node-46
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-6 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-47:
    build: ..
    image: collective:latest
    container_name: scale-node-47
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-7 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-48:
    build: ..
    image: collective:latest
    container_name: scale-node-48
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-8 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-49:
    build: ..
    image: collective:latest
    container_name: scale-node-49
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-9 --address :7001 --coordinator
      coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  node-50:
    build: ..
    image: collective:latest
    container_name: scale-node-50
    networks:
    - testnet
    command: node --member-id member-5 --node-id member-5-node-10 --address :7001
      --coordinator coordinator-5:8001 --capacity 52428800 --data-dir /data
    depends_on:
    - coordinator-5
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 128M
          cpus: '0.2'
  coordinator-external:
    build: ..
    image: collective:latest
    container_name: scale-coordinator-external
    networks:
    - testnet
    - bridge
    command: coordinator --member-id member-external --address :8001 --data-dir /data
      --bootstrap-peers member-1:coordinator-1:8001,member-2:coordinator-2:8001,member-3:coordinator-3:8001,member-4:coordinator-4:8001,member-5:coordinator-5:8001
    ports:
    - 8001:8001
    volumes:
    - /data
    deploy:
      resources:
        limits:
          memory: 256M
          cpus: '0.5'
networks:
  testnet:
    driver: bridge
    ipam:
      config:
      - subnet: 10.150.0.0/16
  bridge:
    driver: bridge
